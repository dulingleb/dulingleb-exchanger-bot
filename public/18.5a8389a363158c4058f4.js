(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"4Nqa":function(t,e,i){"use strict";i.r(e),i.d(e,"SettingsRequisitesModule",function(){return P});var s=i("ofXK"),n=i("3Pt+"),a=i("bTqV"),r=i("kmnG"),o=i("1jcm"),c=i("qFsG"),u=i("NFeN"),l=i("sYmb"),b=i("ir1t"),d=i("+dTB"),p=i("ULOc"),g=i("4evo"),h=i("tyNb"),m=i("5+tZ"),q=i("nYR2"),f=i("1G5W"),D=i("XNiG"),v=i("i/bw"),R=i("fXoL"),T=i("FwLO"),y=i("Pfez");function I(t,e){1&t&&(R.Ub(0,"p",11),R.Ub(1,"mat-icon"),R.Dc(2,"done"),R.Tb(),R.Tb())}function U(t,e){1&t&&(R.Ub(0,"p",12),R.Ub(1,"mat-icon"),R.Dc(2,"clear"),R.Tb(),R.Tb())}const w=function(t){return["/settings/requisites",t,"edit"]};let E=(()=>{class t{constructor(t,e,i){this.route=t,this.settingApiService=e,this.uiFacade=i,this.destroy$=new D.a}ngOnInit(){this.route.paramMap.pipe(Object(m.a)(t=>this.settingApiService.getRequisite(+t.get("id"))),Object(q.a)(()=>this.inRequest=!1),Object(f.a)(this.destroy$)).subscribe(t=>{this.requisite=t},t=>{this.uiFacade.addErrorNotification(t.message)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(R.Ob(h.a),R.Ob(T.e),R.Ob(v.f))},t.\u0275cmp=R.Ib({type:t,selectors:[["app-settings-requisite-info"]],decls:33,vars:23,consts:[["header",""],["actions",""],["mat-raised-button","","color","primary",3,"routerLink"],["content",""],[1,"info-table-block"],[1,"item"],[1,"title"],[1,"value"],[1,"value","text-pre-line"],["class","value text-accent",4,"ngIf"],["class","value text-warn",4,"ngIf"],[1,"value","text-accent"],[1,"value","text-warn"]],template:function(t,e){1&t&&(R.Ub(0,"app-page-content"),R.Sb(1,0),R.Dc(2),R.gc(3,"translate"),R.Ub(4,"i"),R.Dc(5),R.Tb(),R.Rb(),R.Sb(6,1),R.Ub(7,"a",2),R.Ub(8,"mat-icon"),R.Dc(9,"edit"),R.Tb(),R.Ub(10,"span"),R.Dc(11),R.gc(12,"translate"),R.Tb(),R.Tb(),R.Rb(),R.Sb(13,3),R.Ub(14,"section",4),R.Ub(15,"div",5),R.Ub(16,"p",6),R.Dc(17),R.gc(18,"translate"),R.Tb(),R.Ub(19,"p",7),R.Dc(20),R.Tb(),R.Tb(),R.Ub(21,"div",5),R.Ub(22,"p",6),R.Dc(23),R.gc(24,"translate"),R.Tb(),R.Ub(25,"p",8),R.Dc(26),R.Tb(),R.Tb(),R.Ub(27,"div",5),R.Ub(28,"p",6),R.Dc(29),R.gc(30,"translate"),R.Tb(),R.Cc(31,I,3,0,"p",9),R.Cc(32,U,3,0,"p",10),R.Tb(),R.Tb(),R.Rb(),R.Tb()),2&t&&(R.Db(2),R.Fc(" ",R.hc(3,11,"settings.requisites.info.pageTitle")," "),R.Db(3),R.Ec(null==e.requisite?null:e.requisite.title),R.Db(2),R.lc("routerLink",R.nc(21,w,null==e.requisite?null:e.requisite.id)),R.Db(4),R.Ec(R.hc(12,13,"settings.requisites.info.editBtn")),R.Db(6),R.Ec(R.hc(18,15,"settings.requisites.edit.input.title")),R.Db(3),R.Ec(null==e.requisite?null:e.requisite.title),R.Db(3),R.Ec(R.hc(24,17,"settings.requisites.edit.input.text")),R.Db(3),R.Ec(null==e.requisite?null:e.requisite.text),R.Db(3),R.Ec(R.hc(30,19,"settings.requisites.edit.input.status")),R.Db(2),R.lc("ngIf",null==e.requisite?null:e.requisite.status),R.Db(1),R.lc("ngIf",!(null!=e.requisite&&e.requisite.status)))},directives:[y.a,a.a,h.h,u.a,s.l],pipes:[l.c],encapsulation:2}),t})();var S=i("LRne"),O=i("Kbm1");let N=(()=>{class t{constructor(t,e,i,s){this.router=t,this.route=e,this.settingApiService=i,this.uiFacade=s,this.errors={},this.destroy$=new D.a,this.form=new n.f({title:new n.d("",[n.r.required]),text:new n.d(""),status:new n.d("")})}ngOnInit(){this.inRequest=!0,this.route.paramMap.pipe(Object(m.a)(t=>{const e=+t.get("id");return e?this.settingApiService.getRequisite(e):Object(S.a)({})}),Object(f.a)(this.destroy$)).subscribe(t=>{this.inRequest=!1,this.requisite=t,this.form.patchValue({title:t.title,text:t.text,status:t.status})},t=>this.showError(t))}save(){const t=this.form.get("title").value,e=this.form.get("text").value,i=this.form.get("status").value,s=Object.assign(Object.assign({},this.requisite),{title:t,text:e,status:i});this.requisite.id?this.updateRequisite(s):this.addRequisite(s)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateRequisite(t){this.inRequest=!0,this.settingApiService.updateRequisite(t).subscribe(t=>this.showSuccess(t),t=>this.showError(t))}addRequisite(t){this.inRequest=!0,this.settingApiService.addRequisite(t).subscribe(t=>this.showSuccess(t),t=>this.showError(t))}showSuccess(t){this.router.navigateByUrl("/settings/requisites"),this.uiFacade.addInfoNotification(t.message)}showError(t){var e;this.inRequest=!1,this.errors=(null==t?void 0:t.errors)||{};for(const i of Object.keys(this.errors))null===(e=this.form.get(i))||void 0===e||e.setErrors({valid:!1});this.uiFacade.addErrorNotification(t.message)}}return t.\u0275fac=function(e){return new(e||t)(R.Ob(h.f),R.Ob(h.a),R.Ob(T.e),R.Ob(v.f))},t.\u0275cmp=R.Ib({type:t,selectors:[["app-settings-requisite-edit"]],decls:32,vars:20,consts:[["header",""],["content",""],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["appearance","fill"],["formControlName","title","type","text","matInput",""],["name","title",3,"errors"],["formControlName","text","matInput","","rows","20"],["name","text",3,"errors"],["labelPosition","before","color","primary","formControlName","status"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(R.Ub(0,"app-page-content"),R.Sb(1,0),R.Dc(2),R.gc(3,"translate"),R.Ub(4,"i"),R.Dc(5),R.Tb(),R.Rb(),R.Sb(6,1),R.Ub(7,"form",2),R.bc("ngSubmit",function(){return e.save()}),R.Ub(8,"div",3),R.Ub(9,"mat-form-field",4),R.Ub(10,"mat-label"),R.Dc(11),R.gc(12,"translate"),R.Tb(),R.Pb(13,"input",5),R.Ub(14,"mat-error"),R.Pb(15,"app-input-error",6),R.Tb(),R.Tb(),R.Tb(),R.Ub(16,"div",3),R.Ub(17,"mat-form-field",4),R.Ub(18,"mat-label"),R.Dc(19),R.gc(20,"translate"),R.Tb(),R.Pb(21,"textarea",7),R.Ub(22,"mat-error"),R.Pb(23,"app-input-error",8),R.Tb(),R.Tb(),R.Tb(),R.Ub(24,"div",3),R.Ub(25,"mat-slide-toggle",9),R.Ub(26,"mat-label"),R.Dc(27),R.gc(28,"translate"),R.Tb(),R.Tb(),R.Tb(),R.Ub(29,"button",10),R.Dc(30),R.gc(31,"translate"),R.Tb(),R.Tb(),R.Rb(),R.Tb()),2&t&&(R.Db(2),R.Fc(" ",R.hc(3,10,null!=e.requisite&&e.requisite.id?"settings.requisites.edit.pageTitle":"settings.requisites.new.pageTitle")," "),R.Db(3),R.Ec(null==e.requisite?null:e.requisite.title),R.Db(2),R.lc("formGroup",e.form),R.Db(4),R.Ec(R.hc(12,12,"settings.requisites.edit.input.title")),R.Db(4),R.lc("errors",e.errors),R.Db(4),R.Ec(R.hc(20,14,"settings.requisites.edit.input.text")),R.Db(4),R.lc("errors",e.errors),R.Db(4),R.Ec(R.hc(28,16,"settings.requisites.edit.input.status")),R.Db(2),R.lc("disabled",e.form.invalid||e.inRequest),R.Db(1),R.Ec(R.hc(31,18,"settings.requisites.edit.saveBtn")))},directives:[y.a,n.s,n.m,n.g,r.c,r.f,n.c,c.b,n.l,n.e,r.b,O.a,o.a,a.b],pipes:[l.c],encapsulation:2}),t})();var F=i("pLZG"),x=i("vkgz"),A=i("sKXY"),L=i("uhkJ");const j=[{name:"title",nameI18n:"settings.requisites.table.title",type:A.g.STRING,sort:!0,allowedForRoles:[v.d.SUPER_ADMIN,v.d.ADMIN]},{name:"status",nameI18n:"settings.requisites.table.status",icon:t=>t.status?"done":"clear",class:t=>t.status?"text-accent":"text-warn",type:A.g.STRING,sort:!0,allowedForRoles:[v.d.SUPER_ADMIN,v.d.ADMIN]},{name:"info",nameI18n:"table.action.info",type:A.g.STRING,actionData:{link:t=>`/settings/requisites/${null==t?void 0:t.id}/info`,actionType:A.f.LINK,eventType:A.e.INFO},allowedForRoles:[v.d.SUPER_ADMIN,v.d.ADMIN]},{name:"edit",nameI18n:"table.action.edit",type:A.g.STRING,actionData:{link:t=>`/settings/requisites/${null==t?void 0:t.id}/edit`,actionType:A.f.LINK,eventType:A.e.EDIT},allowedForRoles:[v.d.SUPER_ADMIN,v.d.ADMIN]},{name:"delete",nameI18n:"table.action.delete",type:A.g.STRING,actionData:{actionType:A.f.EVENT,eventType:A.e.DELETE},allowedForRoles:[v.d.SUPER_ADMIN,v.d.ADMIN]}];var M=i("7FcC");const $=[{path:"",component:(()=>{class t{constructor(t,e,i,s){this.router=t,this.uiFacade=e,this.confirmModalService=i,this.settingApiService=s,this.requisites=[],this.tableColumns=j,this.destroy$=new D.a}ngOnInit(){this.initFilterFields()}getSettingRequisiteList(t=this.requestApiQuery){this.requestApiQuery=t,this.inRequest=!0,this.settingApiService.getRequisiteList(t).pipe(Object(q.a)(()=>this.inRequest=!1),Object(f.a)(this.destroy$)).subscribe(t=>{this.requisites=t.data,this.paginator={length:t.total,page:t.currentPage,pageSize:t.pageSize}},t=>this.uiFacade.addErrorNotification(t.message))}setEventData(t){t.event===A.e.DELETE&&this.deleteRequisite(t.data)}eventRequisite(t){this.router.navigate(["settings/requisites",t.id,"edit"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}deleteRequisite(t){this.confirmModalService.openDialog({titleI18n:"confirm.deleteModal.title",titleKeyI18n:t.id,messageI18n:"confirm.deleteModal.message",messageKeyI18n:`${t.id} (${t.id})`,confirmBtn:!0,cancelBtn:!0}).pipe(Object(F.a)(t=>t),Object(x.a)(()=>this.inRequest=!0),Object(m.a)(()=>this.settingApiService.deleteRequisite(t.id)),Object(q.a)(()=>this.inRequest=!1),Object(f.a)(this.destroy$)).subscribe(()=>{this.requisites=this.requisites.filter(e=>e.id!==t.id),this.getSettingRequisiteList()},t=>this.uiFacade.addErrorNotification(t.message))}initFilterFields(){this.filterFields=[{labelI18n:"settings.requisites.table.title",name:"title"},{labelI18n:"settings.requisites.table.status",name:"status",type:L.a.SELECT,options:[{value:1,titleI18n:"settings.requisites.status.1",class:"text-accent"},{value:0,titleI18n:"settings.requisites.status.0",class:"text-warn"}]}]}}return t.\u0275fac=function(e){return new(e||t)(R.Ob(h.f),R.Ob(v.f),R.Ob(d.b),R.Ob(T.e))},t.\u0275cmp=R.Ib({type:t,selectors:[["app-settings-requisites"]],decls:11,vars:11,consts:[[3,"tableColumns","inRequest","items","filterFields","paginator","getList","eventData","eventRow"],["table-title",""],["table-actions",""],["mat-raised-button","","color","primary","disableRipple","true","routerLink","/settings/requisites/new",1,"nav-link"]],template:function(t,e){1&t&&(R.Ub(0,"app-page-content-table",0),R.bc("getList",function(t){return e.getSettingRequisiteList(t)})("eventData",function(t){return e.setEventData(t)})("eventRow",function(t){return e.eventRequisite(t)}),R.Sb(1,1),R.Dc(2),R.gc(3,"translate"),R.Rb(),R.Sb(4,2),R.Ub(5,"a",3),R.Ub(6,"mat-icon"),R.Dc(7,"add"),R.Tb(),R.Ub(8,"span"),R.Dc(9),R.gc(10,"translate"),R.Tb(),R.Tb(),R.Rb(),R.Tb()),2&t&&(R.lc("tableColumns",e.tableColumns)("inRequest",e.inRequest)("items",e.requisites)("filterFields",e.filterFields)("paginator",e.paginator),R.Db(2),R.Fc(" ",R.hc(3,7,"settings.requisites.tableHeader.title")," "),R.Db(7),R.Ec(R.hc(10,9,"settings.requisites.tableHeader.addBtn")))},directives:[M.a,a.a,h.h,u.a],pipes:[l.c],encapsulation:2}),t})()},{path:"new",component:N},{path:":id/edit",component:N},{path:":id/info",component:E}];let k=(()=>{class t{}return t.\u0275mod=R.Mb({type:t}),t.\u0275inj=R.Lb({factory:function(e){return new(e||t)},imports:[[h.i.forChild($)],h.i]}),t})(),P=(()=>{class t{}return t.\u0275mod=R.Mb({type:t}),t.\u0275inj=R.Lb({factory:function(e){return new(e||t)},imports:[[s.c,u.b,c.c,a.c,r.e,o.b,l.b,n.q,b.a,d.a,p.a,g.a,k]]}),t})()}}]);